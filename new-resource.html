<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Neue Ressource – LernDashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6b46c1">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192.png" type="image/png">
    <link rel="apple-touch-icon" href="icon-192.png">

    <style>
        :root {
            --primary: #6b46c1;
            --primary-light: #7e5be0;
            --bg: #f5f7fa;
            --card: #ffffff;
            --shadow: 0 4px 20px rgba(0,0,0,0.1);
            --text: #333;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text);
            padding: 40px 20px;
            position: relative;
        }
        .logo-mini {
            position: absolute; top: 20px; left: 20px; width: 50px; height: 50px;
            border-radius: 50%; overflow: hidden; box-shadow: 0 4px 12px rgba(107,70,193,0.3);
            padding: 6px; background: white;
            display: flex; align-items: center; justify-content: center;
        }
        .logo-mini svg { width: 100%; height: 100%; }
        .container {
            max-width: 700px; margin: 0 auto;
            background: var(--card); padding: 32px; border-radius: 16px;
            box-shadow: var(--shadow); margin-top: 60px;
        }
        h2 {
            margin-bottom: 24px; color: var(--primary); font-weight: 700; font-size: 24px;
            text-align: center;
        }
        .form-group {
            margin-bottom: 18px;
        }
        .form-group label {
            display: block; margin-bottom: 6px; font-weight: 600; color: #444;
            font-size: 14px;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px;
            font-size: 15px; background: #fff;
        }
        .form-group textarea {
            min-height: 100px; resize: vertical;
        }
        .btn-group {
            display: flex; gap: 12px; margin-top: 24px;
        }
        .btn {
            flex: 1; padding: 12px 20px; border: none; border-radius: 8px;
            cursor: pointer; font-weight: 600; font-size: 15px;
            transition: 0.2s;
        }
        .btn-primary {
            background: var(--primary); color: white;
        }
        .btn-primary:hover {
            background: var(--primary-light); transform: translateY(-1px);
        }
        .btn-secondary {
            background: #95a5a6; color: white;
        }
        .btn-secondary:hover {
            background: #7f8c8d; transform: translateY(-1px);
        }
        .back-link {
            display: block; text-align: center; margin-top: 20px; color: var(--primary);
            text-decoration: none; font-size: 14px;
        }
        @media (max-width: 600px) {
            .container { padding: 20px; margin-top: 80px; }
            .btn-group { flex-direction: column; }
            .logo-mini { top: 10px; left: 10px; width: 45px; height: 45px; }
        }
    </style>
</head>
<body>
    <!-- MINI-ICON OBEN LINKS -->
    <div class="logo-mini">
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="frameGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#8e67d6"/>
                    <stop offset="100%" stop-color="#5e3ab0"/>
                </linearGradient>
                <linearGradient id="screenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stop-color="#f0f4ff"/>
                    <stop offset="100%" stop-color="#d0e0ff"/>
                </linearGradient>
            </defs>
            <rect x="14" y="14" width="36" height="36" rx="8" fill="url(#frameGrad)" stroke="#4a2e8c" stroke-width="2"/>
            <rect x="16" y="16" width="32" height="32" rx="6" fill="#ffffff"/>
            <rect x="18" y="18" width="28" height="28" rx="4" fill="url(#screenGrad)"/>
            <g transform="translate(21,21)">
                <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#4caf50"/>
                <circle cx="3.5" cy="2.5" r="1.5" fill="#fff"/>
                <path d="M2.5 4.5h2" stroke="#fff" stroke-width="1"/>
                <g transform="translate(9,0)">
                    <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#ff9800"/>
                    <path d="M2 2l3 3m0-3l-3 3" stroke="#fff" stroke-width="1.2" stroke-linecap="round"/>
                </g>
                <g transform="translate(18,0)">
                    <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#e91e63"/>
                    <circle cx="3.5" cy="3.5" r="2" fill="#fff"/>
                    <circle cx="4" cy="3" r="0.8" fill="#333"/>
                </g>
                <g transform="translate(0,9)">
                    <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#f44336"/>
                    <path d="M2 5v-2l3 1v2l-3 1z" fill="#fff"/>
                    <circle cx="4.5" cy="1.5" r="1" fill="#fff"/>
                </g>
                <g transform="translate(9,9)">
                    <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#2196f3"/>
                    <path d="M2.5 2l2.5 1.5v-3z" fill="#fff"/>
                </g>
                <g transform="translate(18,9)">
                    <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#9c27b0"/>
                    <path d="M1.5 2h4M1.5 3.5h4M1.5 5h2" stroke="#fff" stroke-width="0.8"/>
                </g>
                <g transform="translate(0,18)">
                    <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#3f51b5"/>
                    <path d="M1.5 5.5h1v-2h-1zM3 5.5h1v-3h-1zM4.5 5.5h1v-1h-1z" fill="#fff"/>
                </g>
                <g transform="translate(9,18)">
                    <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#00bcd4"/>
                    <circle cx="3.5" cy="3.5" r="2.5" stroke="#fff" stroke-width="0.8" fill="none"/>
                    <path d="M1.5 3.5h4M3.5 1.5v4" stroke="#fff" stroke-width="0.6"/>
                </g>
                <g transform="translate(18,18)">
                    <rect x="0" y="0" width="7" height="7" rx="1.5" fill="#eeeeee"/>
                    <path d="M1.5 2h4M1.5 4h4" stroke="#999" stroke-width="0.8"/>
                    <path d="M1.5 2l.7.7m-.7-.7l1.4 1.4" stroke="#4caf50" stroke-width="1"/>
                </g>
            </g>
            <circle cx="20" cy="20" r="3" fill="#fff" opacity="0.5"/>
        </svg>
    </div>

    <div class="container">
        <h2>Neue Lernressource hinzufügen</h2>

        <div class="form-group">
            <label>Unterrichtsfach *</label>
            <select id="subject" required></select>
        </div>

        <div class="form-group">
            <label>Klassenstufe *</label>
            <select id="grade" required>
                <option value="">Auswählen...</option>
            </select>
        </div>

        <div class="form-group">
            <label>Kompetenzbereich *</label>
            <select id="competence" required>
                <option value="">Auswählen...</option>
            </select>
        </div>

        <div class="form-group">
            <label>Thema *</label>
            <input type="text" id="topic" required placeholder="z.B. Klimawandel, Bruchrechnen">
        </div>

        <div class="form-group">
            <label>Digitales Hilfsmittel</label>
            <input type="text" id="tool" placeholder="z.B. GeoGebra, Canva, Padlet">
        </div>

        <div class="form-group">
            <label>Zusätzliche Beschreibung</label>
            <textarea id="description" placeholder="Lernziele, Ablauf, Tipps..."></textarea>
        </div>

        <div class="btn-group">
            <button class="btn btn-primary" onclick="saveResource()">Speichern</button>
            <button class="btn btn-secondary" onclick="window.location.href='index.html'">Abbrechen</button>
        </div>

        <a href="index.html" class="back-link">Zurück zum Dashboard</a>
    </div>

    <!-- VERSION ANZEIGEN (wie in index.html) -->
    <script>
        const APP_VERSION = 'v1.9.0';

        const versionEl = document.createElement('div');
        versionEl.id = 'app-version';
        versionEl.textContent = APP_VERSION;
        versionEl.style.cssText = `
            position: fixed; bottom: 10px; right: 10px;
            background: rgba(0,0,0,0.7); color: white; padding: 5px 10px;
            border-radius: 8px; font-size: 12px; font-family: 'Segoe UI', sans-serif;
            z-index: 9999; pointer-events: none; backdrop-filter: blur(6px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        `;
        document.body.appendChild(versionEl);
    </script>

    <script>
        const subjects = ["AWT", "Astronomie", "Biologie", "Chemie", "Deutsch", "Englisch", "Französisch", "Geografie", "Geschichte", "Gesellschaftskunde", "Informatik", "Italienisch", "Kunst", "Mathematik", "Musik", "Naturwissenschaften", "Physik", "Plattdeutsch", "Russisch", "Spanisch", "Sozialkunde", "Sport", "Wirtschaft"];
        const grades = Array.from({length: 13}, (_, i) => `Klasse ${i+1}`);
        const competences = [
            "Suchen, Verarbeiten und Aufbewahren",
            "Kommunizieren und Kooperieren",
            "Produzieren und Präsentieren",
            "Schützen und sicher Agieren",
            "Problemlösen und Handeln",
            "Analysieren und Reflektieren"
        ];

        function populate() {
            const s = document.getElementById('subject');
            subjects.forEach(x => s.add(new Option(x, x)));
            const g = document.getElementById('grade');
            grades.forEach(x => g.add(new Option(x, x)));
            const c = document.getElementById('competence');
            competences.forEach(x => c.add(new Option(x, x)));
        }

        function saveResource() {
            const r = {
                subject: document.getElementById('subject').value,
                grade: document.getElementById('grade').value,
                competence: document.getElementById('competence').value,
                topic: document.getElementById('topic').value.trim(),
                tool: document.getElementById('tool').value.trim(),
                description: document.getElementById('description').value.trim()
            };
            if (!r.subject || !r.grade || !r.competence || !r.topic) {
                alert("Bitte alle Pflichtfelder ausfüllen!");
                return;
            }
            let resources = JSON.parse(localStorage.getItem('resources') || '[]');
            resources.push(r);
            localStorage.setItem('resources', JSON.stringify(resources));
            alert("Ressource gespeichert!");
            window.location.href = 'index.html';
        }

        populate();
    </script>
</body>
</html>
